<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§’è‰²æ”¶é›†ç³»ç»Ÿæµ‹è¯•</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/role-collection.css">
    <style>
        body {
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }
        .test-section h2 {
            color: var(--accent-gold);
            margin-bottom: 1rem;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            background: var(--gradient-gold);
            color: var(--bg-primary);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .btn-secondary {
            background: transparent;
            color: var(--accent-gold);
            border: 1px solid var(--accent-gold);
        }
        .test-result {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>ğŸ­ è§’è‰²æ”¶é›†ç³»ç»Ÿæµ‹è¯•é¡µé¢</h1>

    <div class="test-section">
        <h2>1. ç³»ç»Ÿåˆå§‹åŒ–</h2>
        <button class="btn" onclick="initSystem()">åˆå§‹åŒ–è§’è‰²æ”¶é›†ç³»ç»Ÿ</button>
        <div id="init-result" class="test-result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>2. æ¨¡æ‹Ÿè§£é”è§’è‰²</h2>
        <button class="btn" onclick="unlockTestRole('lone_hero')">è§£é”å­¤å‹‡è€…</button>
        <button class="btn" onclick="unlockTestRole('pleaser')">è§£é”è®¨å¥½è€…</button>
        <button class="btn" onclick="unlockTestRole('warrior')">è§£é”æˆ˜å£«</button>
        <button class="btn" onclick="unlockTestRole('healer')">è§£é”æ²»æ„ˆè€…</button>
        <div id="unlock-result" class="test-result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>3. æŸ¥çœ‹æ”¶é›†è¿›åº¦</h2>
        <button class="btn" onclick="showProgress()">æ˜¾ç¤ºè¿›åº¦</button>
        <div id="progress-result" class="test-result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>4. æŸ¥çœ‹å·²è§£é”è§’è‰²</h2>
        <button class="btn" onclick="showUnlockedRoles()">æ˜¾ç¤ºå·²è§£é”è§’è‰²</button>
        <div id="roles-result" class="test-result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>5. æ¸…é™¤æµ‹è¯•æ•°æ®</h2>
        <button class="btn btn-secondary" onclick="clearTestData()">æ¸…é™¤æ‰€æœ‰è§’è‰²æ•°æ®</button>
        <div id="clear-result" class="test-result" style="display:none;"></div>
    </div>

    <div class="test-section">
        <h2>6. è·³è½¬åˆ°å›¾é‰´é¡µé¢</h2>
        <a href="collection/index.html" class="btn">æŸ¥çœ‹è§’è‰²å›¾é‰´</a>
        <a href="index.html" class="btn btn-secondary">è¿”å›æµ‹è¯•é¦–é¡µ</a>
    </div>

    <script src="js/role-collection.js"></script>
    <script>
        function initSystem() {
            RoleCollection.init();
            const result = {
                status: 'success',
                message: 'è§’è‰²æ”¶é›†ç³»ç»Ÿå·²åˆå§‹åŒ–',
                storageKeys: [
                    'lsq_unlockedRoles',
                    'lsq_collectionStats',
                    'lsq_lastViewedRole'
                ]
            };
            document.getElementById('init-result').style.display = 'block';
            document.getElementById('init-result').textContent = JSON.stringify(result, null, 2);
        }

        function unlockTestRole(archetypeId) {
            RoleCollection.init();
            
            // æ¨¡æ‹Ÿè§’è‰²æ•°æ®
            const testCharacters = {
                lone_hero: {
                    name: 'å®‰æ¬£',
                    work: 'ã€Šç‹‚é£™ã€‹',
                    quote: 'æˆ‘æ— äº²æ— æ•…ï¼Œæ•¢è·Ÿä»–è€—ä¸€è¾ˆå­ã€‚',
                    similarity: ['åšæŒæ­£ä¹‰', 'å­¤ç‹¬å‰è¡Œ', 'ä¸å‘é»‘æš—å¦¥å', 'å†…å¿ƒåšå®š'],
                    story: 'ä»æ„æ°”é£å‘çš„å¹´è½»åˆ‘è­¦åˆ°æ»¡å¤´ç™½å‘çš„è¾¹ç¼˜è­¦å¯Ÿï¼Œå®‰æ¬£ç”¨20å¹´æ—¶é—´åšå®ˆæ­£ä¹‰...',
                    advice: 'åƒå®‰æ¬£ä¸€æ ·åšæŒä¿¡å¿µå¾ˆå¯è´µï¼Œä½†ä¹Ÿè¦å­¦ä¼šä¿æŠ¤è‡ªå·±ï¼Œæ‰¾åˆ°å¹¶è‚©ä½œæˆ˜çš„ä¼™ä¼´ã€‚',
                    growthPath: {
                        early: 'å¹´è½»çƒ­è¡€çš„åˆ‘è­¦ï¼Œç›¸ä¿¡æ­£ä¹‰å¿…èƒœ',
                        middle: 'å‘ç°å¸ˆçˆ¶æ˜¯å†…é¬¼ï¼Œå¼€å§‹è¢«å­¤ç«‹',
                        late: 'ç‹¬è‡ªåšå®ˆ20å¹´ï¼Œæœ€ç»ˆå°†é»‘æ¶åŠ¿åŠ›ä¸€ç½‘æ‰“å°½'
                    },
                    turningPoint: {
                        event: 'å‘ç°å¸ˆçˆ¶æ›¹é—¯æ˜¯å†…é¬¼',
                        impact: 'å½»åº•æ‰“ç ´äº†å¯¹ä¸–ç•Œéé»‘å³ç™½çš„è®¤çŸ¥'
                    },
                    realCase: {
                        situation: 'èŒåœºä¸­åšæŒåŸåˆ™å´è¢«å­¤ç«‹',
                        example: 'ä½ æ‹’ç»å‚ä¸éƒ¨é—¨çš„ä¸æ­£å½“æ“ä½œï¼Œç»“æœè¢«è°ƒç¦»æ ¸å¿ƒé¡¹ç›®...'
                    }
                },
                pleaser: {
                    name: 'æ¨Šèƒœç¾',
                    work: 'ã€Šæ¬¢ä¹é¢‚ã€‹',
                    quote: 'æˆ‘æ¨Šèƒœç¾ï¼Œä¸€ä¸ªäººåœ¨ä¸Šæµ·æ‰“æ‹¼ï¼Œå®¹æ˜“å—æˆ‘ï¼Ÿ',
                    similarity: ['è¢«å®¶åº­ç´¢å–', 'æ¸´æœ›è¢«çˆ±', 'å§”å±ˆæ±‚å…¨', 'è‡ªæˆ‘ä»·å€¼æ„Ÿä½'],
                    story: 'å¤–ä¼HRï¼Œå¤–è¡¨å…‰é²œï¼Œå´è¢«åŸç”Ÿå®¶åº­ä¸æ–­ç´¢å–...',
                    advice: 'æ¨Šèƒœç¾çš„å›°å¢ƒåœ¨äºæŠŠä»˜å‡ºå½“ç­¹ç ï¼ŒçœŸæ­£çš„çˆ±ä¸éœ€è¦äº¤æ¢ã€‚',
                    growthPath: {
                        early: 'é€šè¿‡ä»˜å‡ºæ¢å–çˆ±å’Œè®¤å¯',
                        middle: 'ä»˜å‡ºè¢«å½“ä½œç†æ‰€å½“ç„¶',
                        late: 'æ„è¯†åˆ°çˆ±ä¸æ˜¯äº¤æ˜“ï¼Œå¼€å§‹å­¦ä¹ è®¾ç«‹è¾¹ç•Œ'
                    },
                    turningPoint: {
                        event: 'ä»˜å‡ºè¢«å¿½è§†æˆ–åˆ©ç”¨',
                        impact: 'å¼€å§‹è´¨ç–‘ã€Œä»˜å‡º=è¢«çˆ±ã€çš„æ¨¡å¼'
                    },
                    realCase: {
                        situation: 'åœ¨å…³ç³»ä¸­æ€»æ˜¯å§”å±ˆæ±‚å…¨',
                        example: 'ä½ æ€»æ˜¯ä¼˜å…ˆè€ƒè™‘ä¼´ä¾£çš„éœ€æ±‚ï¼Œå‹æŠ‘è‡ªå·±çš„æ„Ÿå—...'
                    }
                },
                warrior: {
                    name: 'æäº‘é¾™',
                    work: 'ã€Šäº®å‰‘ã€‹',
                    quote: 'é¢å¯¹å¼ºå¤§çš„å¯¹æ‰‹ï¼Œæ˜çŸ¥ä¸æ•Œï¼Œä¹Ÿè¦æ¯…ç„¶äº®å‰‘ã€‚',
                    similarity: ['å‹‡æ•¢æ— ç•', 'æˆ˜æ–—ç²¾ç¥', 'é‡æƒ…é‡ä¹‰', 'æ°¸ä¸é€€ç¼©'],
                    story: 'å…«è·¯å†›ç‹¬ç«‹å›¢å›¢é•¿ï¼Œæ€§æ ¼ç²—çŠ·ï¼Œä½œæˆ˜å‹‡çŒ›...',
                    advice: 'æäº‘é¾™çš„äº®å‰‘ç²¾ç¥ä»¤äººæ•¬ä½©ï¼Œä½†æˆ˜æ–—ä¸æ˜¯å”¯ä¸€é€‰æ‹©ã€‚',
                    growthPath: {
                        early: 'å……æ»¡æˆ˜æ–—ç²¾ç¥ï¼ŒæŠŠç”Ÿæ´»çœ‹ä½œæˆ˜åœº',
                        middle: 'èµ¢å¾—èƒœåˆ©ä½†æ„Ÿåˆ°å­¤ç‹¬',
                        late: 'å­¦ä¼šé€‰æ‹©å€¼å¾—çš„æˆ˜æ–—'
                    },
                    turningPoint: {
                        event: 'ä¸ºæˆ˜æ–—å¤±å»é‡è¦çš„äºº',
                        impact: 'å¼€å§‹è´¨ç–‘æˆ˜æ–—çš„æ„ä¹‰'
                    },
                    realCase: {
                        situation: 'äº«å—ç«äº‰ï¼ŒæŠŠç”Ÿæ´»å½“ä½œæˆ˜åœº',
                        example: 'ä½ åœ¨ä¼šè®®ä¸Šæ€»è¦è¯æ˜è‡ªå·±æ˜¯å¯¹çš„...'
                    }
                },
                healer: {
                    name: 'è´ºæ¶µ',
                    work: 'ã€Šæˆ‘çš„å‰åŠç”Ÿã€‹',
                    quote: 'ä½ å·²ç»ä¸å¹´è½»äº†ï¼Œä¸èƒ½å†é åˆ·è„¸å»åšäººç”Ÿçš„æ‘†æ¸¡èˆ¹äº†ã€‚',
                    similarity: ['æ™ºæ…§æˆç†Ÿ', 'å¸®åŠ©ä»–äºº', 'ç†æ€§å†·é™', 'å¼•å¯¼æˆé•¿'],
                    story: 'å’¨è¯¢ä¸šç²¾è‹±ï¼Œå¸®åŠ©ç½—å­å›é‡æ–°ç«™èµ·æ¥...',
                    advice: 'è´ºæ¶µçš„æ™ºæ…§å€¼å¾—å­¦ä¹ ï¼Œä½†å¸®åŠ©ä»–äººä¸èƒ½ä»£æ›¿è‡ªå·±çš„æˆé•¿ã€‚',
                    growthPath: {
                        early: 'å¤©ç”Ÿå–„äºå€¾å¬å’Œæ”¯æŒä»–äºº',
                        middle: 'å¿½è§†è‡ªå·±çš„éœ€æ±‚ï¼Œæ„Ÿåˆ°ç–²æƒ«',
                        late: 'å­¦ä¼šæ¥å—å¸®åŠ©ï¼Œæ˜ç™½çˆ±æ˜¯åŒå‘æµåŠ¨'
                    },
                    turningPoint: {
                        event: 'ç²¾ç–²åŠ›ç«­æ—¶å‘ç°è‡ªå·±éš¾ä»¥æ±‚åŠ©',
                        impact: 'æ„è¯†åˆ°æ²»æ„ˆä»–äººå‰éœ€è¦å…ˆæ²»æ„ˆè‡ªå·±'
                    },
                    realCase: {
                        situation: 'å–„äºå€¾å¬ä½†éš¾ä»¥è¡¨è¾¾è‡ªå·±çš„éœ€æ±‚',
                        example: 'ä½ æ€»æ˜¯æœ‹å‹å€¾è¯‰çš„å¯¹è±¡ï¼Œä½†å½“ä½ éš¾è¿‡æ—¶å´ä¸çŸ¥é“æ€ä¹ˆå¼€å£...'
                    }
                }
            };
            
            const character = testCharacters[archetypeId];
            const matchPercentage = Math.floor(Math.random() * 30) + 70; // 70-99%
            
            const result = RoleCollection.unlockRole(archetypeId, character, matchPercentage);
            
            document.getElementById('unlock-result').style.display = 'block';
            document.getElementById('unlock-result').textContent = JSON.stringify(result, null, 2);
        }

        function showProgress() {
            const progress = RoleCollection.getProgress();
            document.getElementById('progress-result').style.display = 'block';
            document.getElementById('progress-result').textContent = JSON.stringify(progress, null, 2);
        }

        function showUnlockedRoles() {
            const roles = RoleCollection.getUnlockedRoles();
            document.getElementById('roles-result').style.display = 'block';
            document.getElementById('roles-result').textContent = JSON.stringify(roles, null, 2);
        }

        function clearTestData() {
            RoleCollection.clearAll();
            document.getElementById('clear-result').style.display = 'block';
            document.getElementById('clear-result').textContent = 'æ‰€æœ‰è§’è‰²æ”¶é›†æ•°æ®å·²æ¸…é™¤';
        }
    </script>
</body>
</html>
