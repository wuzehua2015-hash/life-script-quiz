<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>人生剧本测试 v2.0 - 你正在主演哪部剧？</title>
    <meta name="description" content="基于PTK人生剧本理论的互动测试，发现你正在主演的人生剧本，匹配80个经典影视角色">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/role-collection.css">
    <link rel="stylesheet" href="css/badges.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- 开场动画 -->
    <div id="intro-screen" class="screen active">
        <div class="film-grain"></div>
        <div class="spotlight"></div>
        <div class="intro-content">
            <div class="version-badge">v2.0 角色觉醒</div>
            <div class="clapperboard">
                <div class="clapper-top">
                    <span>SCENE 1</span>
                    <span>TAKE 1</span>
                </div>
                <div class="clapper-bottom">
                    <h1>人生剧本</h1>
                    <p class="subtitle">你正在主演的剧</p>
                </div>
            </div>
            <div class="intro-text">
                <p>每个人的人生都是一部自编自导自演的电影</p>
                <p>你以为你在随机应变，其实你的「编剧」早已写好了剧本</p>
            </div>
            
            <!-- v2.0 新增特性展示 -->
            <div class="v2-features">
                <div class="v2-feature-item" style="animation: fade-in-up 0.6s ease-out 0.2s both;">
                    <span class="v2-feature-icon">🎭</span>
                    <span class="v2-feature-text">80个经典角色</span>
                </div>
                <div class="v2-feature-item" style="animation: fade-in-up 0.6s ease-out 0.4s both;">
                    <span class="v2-feature-icon">🔮</span>
                    <span class="v2-feature-text">智能混合匹配</span>
                </div>
                <div class="v2-feature-item" style="animation: fade-in-up 0.6s ease-out 0.6s both;">
                    <span class="v2-feature-icon">📸</span>
                    <span class="v2-feature-text">精美分享海报</span>
                </div>
            </div>

            <!-- v2.4 新增：个人中心入口 -->
            <div class="profile-entry" style="margin: 1.5rem 0; animation: fade-in-up 0.6s ease-out 0.8s both;">
                <a href="profile/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-right:10px;margin-bottom:10px;">
                    <span>👤 个人中心</span>
                </a>
                <a href="mood/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-right:10px;margin-bottom:10px;">
                    <span>😊 情绪打卡</span>
                </a>
                <a href="guide/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-bottom:10px;">
                    <span>🎯 应对指南</span>
                </a>
            </div>

            <!-- 理论介绍 -->
            <div class="theory-intro">
                <h3>🎭 这个测试会告诉你什么</h3>
                <div class="theory-cards">
                    <div class="theory-card">
                        <div class="theory-icon">🎬</div>
                        <div class="theory-title">你正在演什么戏</div>
                        <div class="theory-desc">是孤军奋战的励志片、讨好别人的苦情戏，还是随遇而安的文艺片？</div>
                    </div>
                    <div class="theory-card">
                        <div class="theory-icon">👤</div>
                        <div class="theory-title">你像哪个角色</div>
                        <div class="theory-desc">从80个经典影视角色中找到最像你的人物，看看TA的故事给你什么启示</div>
                    </div>
                    <div class="theory-card">
                        <div class="theory-icon">📝</div>
                        <div class="theory-title">怎么改写剧本</div>
                        <div class="theory-desc">如果不喜欢现在的剧情，你可以从哪一页开始重写？</div>
                    </div>
                </div>
                <div class="theory-tip">
                    <p>💡 <strong>测试提示</strong>：12道场景问答 + 基础信息，选择你最真实的反应。没有对错，只有「现在的你」。</p>
                </div>
            </div>
            <button id="start-btn" class="btn-primary">
                <span>🎬 开始试镜</span>
            </button>
        </div>
    </div>

    <!-- 基础信息页面 -->
    <div id="basic-screen" class="screen">
        <div class="basic-header">
            <h2>最后一步</h2>
            <p>填写基础信息，生成你的专属角色报告</p>
        </div>
        <div class="basic-progress-bar">
            <div class="basic-progress-fill" id="basic-progress"></div>
        </div>
        <div class="basic-container" id="basic-questions-container">
            <!-- 动态生成基础问题 -->
        </div>
        <div class="basic-footer">
            <button id="basic-next-btn" class="btn-primary">
                <span>下一步 →</span>
            </button>
        </div>
    </div>

    <!-- 测试页面 -->
    <div id="quiz-screen" class="screen">
        <!-- 胶片进度条 -->
        <div class="film-progress">
            <div class="film-strip">
                <div class="film-holes">
                    <span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span>
                    <span></span><span></span><span></span><span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            <div class="scene-counter">
                <span id="current-scene">1</span> / <span id="total-scenes">12</span>
            </div>
        </div>

        <!-- 场景内容 -->
        <div class="scene-container">
            <div class="scene-card" id="scene-card">
                <div class="scene-header">
                    <span class="scene-tag">第 <span id="scene-number">1</span> 场</span>
                    <span class="scene-location" id="scene-location">INT. 办公室 - 早晨</span>
                </div>
                
                <div class="scene-dialogue" id="scene-dialogue">
                    <!-- 动态插入对话 -->
                </div>

                <div class="choices-container" id="choices-container">
                    <!-- 动态插入选项 -->
                </div>
                
                <div class="quiz-nav" id="quiz-nav">
                    <button id="prev-btn" class="btn-nav btn-prev" style="display: none;">
                        <span>← 上一题</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载中 -->
    <div id="loading-screen" class="screen">
        <div class="loading-content">
            <div class="film-reel">
                <div class="reel"></div>
                <div class="reel"></div>
            </div>
            <p>正在分析你的人生剧本...</p>
            <p class="loading-sub">从80个角色中寻找最匹配的你</p>
        </div>
    </div>

    <!-- 结果页面 -->
    <div id="result-screen" class="screen">
        <div class="result-poster" id="result-poster">
            <div class="poster-header">
                <div class="rating-badge" id="rating-badge">v2.0</div>
                <h2 class="movie-title" id="movie-title">孤勇者传说</h2>
                <p class="tagline" id="tagline">「只有赢才能证明我活着」</p>
            </div>
            
            <div class="poster-content">
                <!-- v2.0 新增：角色匹配卡片 -->
                <div id="match-percentage"></div>
                
                <div id="character-card" class="result-section character-section">
                    <!-- 动态插入角色卡片 -->
                </div>

                <div class="archetype-badge" id="archetype-badge">
                    <span class="archetype-name" id="archetype-name">孤勇者</span>
                    <span class="archetype-subtitle" id="archetype-subtitle">Achievement + Battle</span>
                </div>

                <!-- v2.0 新增：匹配逻辑解释 -->
                <div class="result-section" id="match-explanation">
                    <!-- 动态插入匹配逻辑解释 -->
                </div>

                <!-- v2.0 新增：相似点分析 -->
                <div class="result-section" id="similarity-points">
                    <!-- 动态插入相似点 -->
                </div>

                <!-- v2.0 新增：角色故事 -->
                <div class="result-section" id="character-story">
                    <!-- 动态插入角色故事 -->
                </div>

                <!-- v2.0 新增：人生预测 -->
                <div class="result-section" id="life-prediction">
                    <!-- 动态插入人生预测 -->
                </div>

                <!-- v2.0 新增：相似角色推荐 -->
                <div class="result-section" id="similar-characters">
                    <!-- 动态插入相似角色推荐 -->
                </div>

                <!-- v2.0 新增：角色建议 -->
                <div class="result-section" id="character-advice">
                    <!-- 动态插入建议 -->
                </div>

                <!-- 当前主演的烂片 -->
                <div class="result-section">
                    <h3>🎬 当前主演的烂片</h3>
                    <div class="section-content" id="bad-movie-content">
                        <!-- 动态内容 -->
                    </div>
                </div>

                <!-- 剧组卡司表 -->
                <div class="result-section">
                    <h3>🎭 你的剧组卡司表</h3>
                    <div class="cast-grid" id="cast-grid">
                        <!-- 动态内容 -->
                    </div>
                </div>

                <!-- 新剧本大纲 -->
                <div class="result-section">
                    <h3>📝 新剧本大纲</h3>
                    <div class="section-content" id="new-script-content">
                        <!-- 动态内容 -->
                    </div>
                </div>

                <!-- 明日拍摄计划 -->
                <div class="result-section">
                    <h3>🎬 明日拍摄计划</h3>
                    <div class="action-plan" id="action-plan">
                        <!-- 动态内容 -->
                    </div>
                </div>

                <!-- 维度雷达 -->
                <div class="result-section">
                    <h3>📊 你的四维画像</h3>
                    <div class="radar-container">
                        <canvas id="radar-chart" width="300" height="300"></canvas>
                    </div>
                    <!-- 雷达图解读说明 -->
                    <div class="radar-legend" id="radar-legend">
                        <div class="legend-item">
                            <span class="legend-icon">📍</span>
                            <span class="legend-text">中心 = 该维度倾向较弱</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-icon">🔸</span>
                            <span class="legend-text">外围 = 该维度倾向较强</span>
                        </div>
                    </div>
                    <div class="dimension-tags" id="dimension-tags">
                        <!-- 动态内容 -->
                    </div>
                </div>

                <!-- 四维深度解读（新增） -->
                <div class="result-section" id="dimension-analysis">
                    <!-- 动态插入四维解读 -->
                </div>

                <!-- v2.4 新增：成就徽章展示 -->
                <div class="result-section" id="result-badges-section">
                    <!-- 动态插入徽章展示 -->
                </div>
            </div>

            <div class="poster-footer">
                <p class="director-credit">导演：你的潜意识编剧</p>
                <p class="studio-logo">PTK LIFE SCRIPT STUDIOS v2.0</p>
            </div>
        </div>

        <div class="result-actions">
            <button id="share-btn" class="btn-secondary">
                <span>📸 生成海报分享</span>
            </button>
            <button id="retake-btn" class="btn-primary">
                <span>🔄 重新试镜</span>
            </button>
            <a href="collection/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-left:10px;margin-bottom:10px;">
                <span>📚 查看所有角色</span>
            </a>
            <a href="guidance/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-left:10px;margin-bottom:10px;">
                <span>🎯 改变剧本</span>
            </a>
            <a href="guide/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-left:10px;margin-bottom:10px;">
                <span>🌉 应对指南</span>
            </a>
            <a href="achievements/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-left:10px;margin-bottom:10px;">
                <span>🏅 我的成就</span>
            </a>
            <a href="profile/index.html" class="btn-secondary" style="display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:8px;background:transparent;color:#d4af37;border:1px solid #d4af37;text-decoration:none;margin-left:10px;margin-bottom:10px;">
                <span>👤 个人中心</span>
            </a>
        </div>
    </div>

    <!-- 分享海报模态框 -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-modal">&times;</span>
            <div id="share-poster-container">
                <!-- 生成的分享海报 -->
            </div>
            <p class="share-tip">长按保存图片，分享给朋友</p>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/achievement-service.js"></script>
    <script src="js/badge-ui.js"></script>
    <script src="js/data.js"></script>
    <script src="js/role-collection.js"></script>
    <script src="js/role-collection-ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
